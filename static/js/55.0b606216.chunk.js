(this["webpackJsonpVishwa Car Rental"]=this["webpackJsonpVishwa Car Rental"]||[]).push([[55],{397:function(e,t,a){"use strict";a.r(t);var i=a(51),s=a(52),c=a(68),r=a(42),n=a(41),o=a(43),l=a(44),d=a(1),m=a(49),h=a(389),j=a(437),u=a(398),b=a(53),p=a(48),x=a(55),O=a(3),y=a(54),f=a.n(y),g=a(0),N=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n,o;return Object(r.a)(this,a),(o=t.call(this,e)).state=(n={item:[],id:"",cabType:"",image:"",ac:"",bags:"",cars:"",capacity:"",note:"",amount:0,journyTime:"",discountAmount:0,finalAmount:0,mobileNo:"",pickupCity:"",destinationCity:"",pickupDate:"",returnDateTime:"",originlat:0,originlng:0,destinationlat:0,destinationlng:0,distance:0,firstName:"",lastName:"",email:"",error:"",payment_orderId:"",currency:"",receipt:"",bookingAmount:0},Object(c.a)(n,"pickupCity",""),Object(c.a)(n,"pickupDistrict",""),Object(c.a)(n,"pickupState",""),Object(c.a)(n,"dropCity",""),Object(c.a)(n,"dropDistrict",""),Object(c.a)(n,"dropState",""),Object(c.a)(n,"userrId",0),n),o.setFirstName=function(e){o.setState({firstName:e.target.value})},o.setLastName=function(e){o.setState({lastName:e.target.value})},o.setEmail=function(e){o.setState({email:e.target.value})},o.loadScript=function(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))},o.prePayment=Object(s.a)(Object(i.a)().mark((function e(){var t,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PrePayment===="),e.next=3,o.loadScript("https://checkout.razorpay.com/v1/checkout.js");case 3:if(e.sent){e.next=7;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 7:return t=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(t)},"amount=",s={amount:100*o.state.bookingAmount,bookingId:o.state.item.bookingId,mobileNo:o.state.item.mobileNo},e.next=13,f.a.post("http://localhost:8080/booking/payment",s,{headers:a});case 13:if(c=e.sent){e.next=17;break}return alert("Server error. Are you online?"),e.abrupt("return");case 17:return o.setState({payment_orderId:c.data.data.id,currency:c.data.data.currency,receipt:c.data.data.receipt}),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)}))),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=[];void 0==this.props.location.dataObj||"undefined"==this.props.location.dataObj?(e=localStorage.getItem("dataObj"),e=JSON.parse(e),this.setState({item:e})):(e=this.props.location.dataObj,localStorage.setItem("dataObj",JSON.stringify(e)),this.setState({item:e}));var t=localStorage.getItem("userId");this.setState({userId:t}),this.setState({pickupCity:e.pickupCity});var a=Math.round("5"*e.finalAmount/100);this.setState({bookingAmount:a}),this.prePayment()}},{key:"payNow",value:function(){var e=Object(s.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("In Pay now"),t=this.state.item.bookingId,a={key:"rzp_live_P6qbTUQVqidRo6",amount:100*this.state.bookingAmount,currency:this.state.currency,name:this.state.firstName+" "+this.state.lastName,description:"Booking ID: "+t,image:"",order_id:this.state.payment_orderId,handler:function(){var e=Object(s.a)(Object(i.a)().mark((function e(a){var s,c,r,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={razorpayPaymentId:a.razorpay_payment_id,razorpayOrderId:a.razorpay_order_id,razorpaySignature:a.razorpay_signature,rawResponce:a},c=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(c)},e.next=5,f.a.post("http://localhost:8080/booking/success",s,{headers:r});case 5:n=e.sent,window.location.href="/ThankYou/"+t,alert(n.data.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),prefill:{name:this.state.firstName+" "+this.state.lastName,email:this.state.email,contact:this.state.item.mobileNo},notes:{address:this.state.item.pickupCity},theme:{color:"#61dafb"}},new window.Razorpay(a).open();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"confirm",value:function(){var e=Object(s.a)(Object(i.a)().mark((function e(){var t,a,s,c,r,n,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("token"),a={Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},s=this.state.item.returnDateTime,c="Y",""!=s&&void 0!=s&&"undefined"!=s||(s="",c="N"),""!=this.state.firstName){e.next=9;break}return this.setState({error:"Please Enter First name"}),e.abrupt("return",!1);case 9:if(""!=this.state.lastName){e.next=12;break}return this.setState({error:"Please Enter Last name"}),e.abrupt("return",!1);case 12:if(""!=this.state.email){e.next=15;break}return this.setState({error:"Please Enter Email"}),e.abrupt("return",!1);case 15:return"&fname="+this.state.firstName+"&lname="+this.state.lastName+"&email="+this.state.email+"&cabId="+this.state.item._id+"&pickup="+this.state.item.pickupCity+"&destination="+this.state.item.destinationCity+"&pickupDate="+this.state.item.pickupDate+"&returnDate="+s+"&isReturn="+c+"&pickupLat="+this.state.item.originlat+"&pickupLong="+this.state.item.originlng+"&destinationLat="+this.state.item.destinationlat+"&destinationLong="+this.state.item.destinationlng+"&distance="+this.state.item.distance+"&journyTime="+this.state.item.journyTime+"&cabType="+this.state.item.cabType+"&ac="+this.state.item.ac+"&bags="+this.state.item.bags+"&cars="+this.state.item.cars+"&capacity="+this.state.item.capacity+"&note="+this.state.item.note+"&rate="+this.state.item.rate+"&amount="+this.state.item.amount+"&discountAmount="+this.state.item.discountAmount+"&finalAmount="+this.state.item.finalAmount+"&mobileNo="+this.state.item.mobileNo+"&bookingId="+this.state.item.bookingId+"&payment_orderId="+this.state.payment_orderId+"&pickupCityName="+this.state.item.pickupCityName+"&pickupDistrict="+this.state.item.pickupDistrict+"&pickupState="+this.state.item.pickupState+"&dropCityName="+this.state.item.dropCityName+"&dropDistrict="+this.state.item.dropDistrict+"&dropState="+this.state.item.dropState+"&extraRate="+this.state.item.extraRate,r={fname:this.state.firstName,lname:this.state.lastName,email:this.state.email,cabId:this.state.item._id,pickup:this.state.item.pickupCity,destination:this.state.item.destinationCity,pickupDate:this.state.item.pickupDate,returnDate:s,isReturn:c,pickupLat:this.state.item.originlat,pickupLong:this.state.item.originlng,destinationLat:this.state.item.destinationlat,destinationLong:this.state.item.destinationlng,distance:this.state.item.distance,journyTime:this.state.item.journyTime,cabType:this.state.item.cabType,ac:this.state.item.ac,bags:this.state.item.bags,cars:this.state.item.cars,capacity:this.state.item.capacity,note:this.state.item.note,rate:this.state.item.rate,amount:this.state.item.amount,discountAmount:this.state.item.discountAmount,finalAmount:this.state.item.finalAmount,mobileNo:this.state.item.mobileNo,bookingId:this.state.item.bookingId,payment_orderId:this.state.payment_orderId,pickupCityName:this.state.item.pickupCityName,pickupDistrict:this.state.item.pickupDistrict,pickupState:this.state.item.pickupState,dropCityName:this.state.item.dropCityName,dropDistrict:this.state.item.dropDistrict,dropState:this.state.item.dropState,extraRate:this.state.item.extraRate,userId:this.state.userId},e.next=19,f.a.post("http://localhost:8080/booking/book_cab",r,{headers:a});case 19:if(n=e.sent,200!=(o=n.data).code){e.next=26;break}return e.next=24,this.payNow();case 24:e.next=27;break;case 26:this.setState({error:o.message});case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),this.setState({isOtpSent:"N"}),this.setState({error:"some internal error please try later"});case 33:return e.abrupt("return",!0);case 34:case"end":return e.stop()}}),e,this,[[0,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(p.default,{}),Object(g.jsx)("div",{children:Object(g.jsx)("section",{id:"pricing",className:"pricing",children:Object(g.jsxs)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-lg-7 col-md-7",style:{marginBottom:5},children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)(m.a.Title,{style:{fontSize:16,padding:10,color:"white",backgroundColor:"gray"},children:"Booking Confirmation "}),Object(g.jsxs)(m.a.Body,{children:[Object(g.jsx)("div",{style:{color:"red"},children:this.state.error}),Object(g.jsx)("div",{className:"col-12",children:Object(g.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(g.jsx)(b.a.Label,{children:"Mobile No"}),Object(g.jsx)(b.a.Control,{type:"text",disabled:!0,placeholder:"Mobile No",value:this.state.item.mobileNo})]})}),Object(g.jsx)("div",{className:"col-12",children:Object(g.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(g.jsx)(b.a.Label,{children:"First Name"}),Object(g.jsx)(b.a.Control,{type:"text",placeholder:"First name",onChange:this.setFirstName})]})}),Object(g.jsx)("div",{className:"col-12",children:Object(g.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(g.jsx)(b.a.Label,{children:"Last Name"}),Object(g.jsx)(b.a.Control,{type:"text",placeholder:"Last name",onChange:this.setLastName})]})}),Object(g.jsx)("div",{className:"col-12",children:Object(g.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(g.jsx)(b.a.Label,{children:"Email"}),Object(g.jsx)(b.a.Control,{type:"text",placeholder:"Email",onChange:this.setEmail})]})}),Object(g.jsx)("div",{className:"col-12",children:Object(g.jsx)(b.a.Group,{controlId:"formBasicEmail",style:{float:"right"},children:Object(g.jsxs)(h.a,{variant:"primary",type:"button",onClick:this.confirm.bind(this),children:["Pay (",this.state.bookingAmount,") to confirm"]})})})]})]})}),Object(g.jsx)("div",{className:"col-lg-5 col-md-5",style:{marginBottom:5},children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)(m.a.Title,{style:{fontSize:16,padding:10,color:"white",backgroundColor:"gray"},children:"Booking Details "}),Object(g.jsxs)(m.a.Body,{children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"BookingId"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.bookingId})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Pickup"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.pickupCity})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Destination"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.destinationCity})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Pickup Date"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.pickupDate})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Return Date"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.returnDateTime})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Cab Type"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.cabType})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"AC"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.ac})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Bags"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.bags})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Capacity"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.capacity})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Amount"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.amount})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Discount"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.discountAmount})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6",children:"Total"}),Object(g.jsx)("div",{className:"col-6",children:this.state.item.finalAmount})]}),Object(g.jsx)("div",{className:"row",children:Object(g.jsxs)("div",{className:"col-12",style:{color:"green",fontSize:14},children:["Cars: ",this.state.item.cars]})}),Object(g.jsx)("div",{className:"row",style:{color:"#e738eb",fontSize:14},children:Object(g.jsxs)("div",{className:"col-12",children:["Journy: ",this.state.item.distance,"KM  (",this.state.item.journyTime,")"]})}),Object(g.jsx)("div",{className:"row",style:{color:"red",fontSize:14},children:Object(g.jsxs)("div",{className:"col-12",children:["Note: ",Object(g.jsx)("span",{children:this.state.item.note})]})})]})]})})]}),Object(g.jsx)("div",{className:"bookingConfirmTabs",style:{marginBottom:5},children:Object(g.jsxs)(j.a,{defaultActiveKey:"tnc",id:"uncontrolled-tab-example",className:"mb-12",children:[Object(g.jsx)(u.a,{eventKey:"includes",title:"Includes",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-user-secret","aria-hidden":"true"})," Driver Allowance one way trip"]}),Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-inr","aria-hidden":"true"})," GST (5%)"]}),Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-road","aria-hidden":"true"})," ",this.state.item.distance,"Km Charges"]})]})}),Object(g.jsx)(u.a,{eventKey:"excludes",title:"Excludes",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-user-secret","aria-hidden":"true"})," Driver Allowance for round trip"]}),Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-inr","aria-hidden":"true"})," Toll / State tax"]}),Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-product-hunt","aria-hidden":"true"})," Parking"]}),Object(g.jsxs)("div",{className:"col-4",style:{textAlign:"center",padding:20},children:[Object(g.jsx)("i",{style:{padding:10,borderStyle:"ridge",borderRadius:"20%"},className:"fa fa-road","aria-hidden":"true"})," Pay \u20b9",this.state.item.extraRate,"/km after ",this.state.item.distance," km"]})]})}),Object(g.jsx)(u.a,{eventKey:"tnc",title:"T&C",children:Object(g.jsx)("div",{style:{backgroundColor:"white",padding:10},children:Object(g.jsxs)("ul",{style:{textAlign:"justify"},children:[Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"18% extra chargest for GST BIll"]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Day calculated according to english calender"]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"A/C will be turned off when cab is in halting, parking or in hilly area "]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Day starting at 6AM onword and ends at 10PM "]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"After 10PM 200Per Hours charges applicable still 1AM. After 1AM nest day will be calculated avrage of 300KM "]}),Object(g.jsxs)("li",{children:[" ",Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Car shall not nbe used for local use after completion of outstation trip."]}),Object(g.jsxs)("li",{children:[" ",Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Early morning pickup will charge Rs.300 only"]}),Object(g.jsxs)("li",{children:[" ",Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"For Round trip toll,parking, boundry tax will charged to customer"]}),Object(g.jsxs)("li",{children:[" ",Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Your Trip has a KM limit. If your usage exceeds this limit, you will be charged for the excess KM used."]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"We promote cleaner fuel and thus your cab can be a CNG vehicle. The driver may need to fill CNG once or more during your trip. Please cooperate with the driver."]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"For driving between 10:00 pm to 6:00 am on any of the nights, an additional allowance will be applicable and is to be paid to the driver."]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"Your trip includes one pick up in Pick-up city and one drop to destination city. It does not include within city travel."]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),"If your Trip has Hill climbs, cab AC may be switched off during such climbs."]})]})})})]})})]})})}),Object(g.jsx)(x.a,{})]})}}]),a}(d.Component);t.default=Object(O.f)(N)}}]);
//# sourceMappingURL=55.0b606216.chunk.js.map