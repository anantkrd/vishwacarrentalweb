{"version":3,"sources":["component/Driver/Profile.jsx"],"names":["Profile","props","state","userId","item","error","isLoading","loadingColor","pageNo","mobileNo","firstName","lastName","userPassword","email","licenseLink","idNumber","loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","updateProfile","setState","token","localStorage","getItem","headers","data","axios","post","process","result","console","log","JSON","stringify","code","message","isOtpSent","response","setUserPassword","target","value","this","getProfile","urlData","fetch","json","dataRes","idProof","css","style","borderColor","color","loading","size","id","className","width","Title","fontSize","padding","backgroundColor","Body","display","gridTemplateColumns","gridGap","Group","controlId","Label","Control","type","disabled","placeholder","name","onChange","float","variant","onClick","bind","Component","withRouter"],"mappings":"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","file":"static/js/56.19bc9b31.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Card from 'react-bootstrap/Card'\r\nimport { Button,Table } from 'react-bootstrap';\r\nimport Form from 'react-bootstrap/Form';\r\nimport  Header  from \"../Header\";\r\nimport  Footer  from \"../Footer\";\r\nimport { Link } from 'react-router-dom'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from 'react-router-dom';\r\nclass Profile extends Component {\r\n    \r\n    state = {userId:'',item:[],error:'',isLoading:false,loadingColor:'#ffffff',pageNo:0,mobileNo:'',firstName:'',lastName:'',userPassword:'',email:'',licenseLink:'',idNumber:''};\r\n    constructor(props) {\r\n        super(props);    \r\n        //console.log(\"++pickup**********===\"+JSON.stringify(this.props));    \r\n      }\r\n    \r\n      componentDidMount() {    \r\n          this.setState({isLoading:true});      \r\n       let userId=localStorage.getItem(\"userId\");\r\n       this.setState({userId:userId});\r\n              \r\n        //this.setState({item:this.props.match.params.data});\r\n        this.getProfile(userId);\r\n      }\r\n    \r\n    async getProfile(userId){\r\n        console.log(\"*****getBookigs******\");   \r\n        this.setState({error:''});\r\n        //const headers = { 'Content-Type': 'application/json' } \r\n        let token=localStorage.getItem(\"token\");\r\n        let pageNo=this.state.pageNo+1;\r\n        \r\n        const headers = {'Authorization':`Bearer ${token}`} ;\r\n          let urlData=\"&userId=\"+userId+\"&pageId=\"+pageNo;\r\n          //const response = await fetch('http://localhost:3001/booking/getCabs?originObj='+originObj+'&destinationObj='+destinationObj, { headers });\r\n          \r\n          const response = await fetch(process.env.REACT_APP_APIURL+'user/get_user_byid?'+urlData, { headers });\r\n          //console.log(\"+++response==\"+JSON.stringify(response))\r\n          const dataRes = await response.json();\r\n                    \r\n          if(dataRes.code==200){\r\n            console.log(\"idProof:\"+dataRes.data.idProof);\r\n                let idProof=dataRes.data.idProof;\r\n              this.setState({firstName:dataRes.data.firstName});\r\n              this.setState({lastName:dataRes.data.lastName});\r\n              this.setState({mobileNo:dataRes.data.mobileNo});\r\n              this.setState({email:dataRes.data.email});\r\n              this.setState({licenseLink:dataRes.data.idProof});\r\n              this.setState({idNumber:dataRes.data.idNumber});\r\n              this.setState({item:dataRes.data});\r\n          }else{              console.log(\"errorr\")\r\n              this.setState({error:'some internal error please try later'})\r\n          }\r\n          \r\n          this.setState({isLoading:false});\r\n          //this.setState({cabsList:data.data});\r\n    }\r\n    \r\n    loadScript=(src) =>{\r\n        return new Promise((resolve) => {\r\n            const script = document.createElement(\"script\");\r\n            script.src = src;\r\n            script.onload = () => {\r\n                resolve(true);\r\n            };\r\n            script.onerror = () => {\r\n                resolve(false);\r\n            };\r\n            document.body.appendChild(script);\r\n        });\r\n    }\r\n    \r\n\r\n    updateProfile = async () => {\r\n        try {\r\n            this.setState({error:''});\r\n            let token = localStorage.getItem(\"token\");\r\n\r\n            const headers = { 'Authorization': `Bearer ${token}` };\r\n            \r\n            if (this.state.userPassword == \"\" || this.state.userPassword == null) {\r\n                this.setState({ error: \"Please enter password\" })\r\n                return false;\r\n            }\r\n            const data = {\r\n                userId: this.state.userId,\r\n                userPassword: this.state.userPassword,\r\n            };\r\n\r\n\r\n            const result = await axios.post(process.env.REACT_APP_APIURL + \"user/update_password\", data, { headers });\r\n            console.log(\"result:\" + JSON.stringify(result));\r\n            if (result.data.code == 200) {\r\n                this.setState({ error: result.data.message });\r\n                this.setState({userPassword:''})\r\n                //this.getDrivers(this.state.userId);\r\n            } else {\r\n\r\n                this.setState({ error: result.data.message })\r\n            }\r\n        } catch (err) {\r\n\r\n            this.setState({ isOtpSent: 'N' });\r\n            this.setState({ error: err.response.data.message });\r\n        }\r\n        this.setState({ isLoading: false });\r\n    }\r\n    setUserPassword = (userPassword) => {\r\n        this.setState({ userPassword: userPassword.target.value });\r\n    }\r\n    render() { \r\n        const override =`\r\n        display: block;\r\n        margin: 0 auto;\r\n        border-color: red;\r\n        position: absolute;\r\n        z-index: 9;\r\n        margin: 0px auto;\r\n        left: 40%;\r\n        `;\r\n        return (\r\n           \r\n            <div> \r\n                <Header/> \r\n                <div>\r\n                <ClipLoader css={override} style={{borderColor:'red'}} color={this.state.loadingColor} loading={this.state.isLoading}  size={150} >  </ClipLoader>\r\n                </div>\r\n                \r\n                \r\n                <div> \r\n                <section id=\"pricing\" className=\"pricing\">\r\n\r\n                    <div className=\"container\" data-aos=\"fade-up\" style={{width:'95%!important'}}>\r\n                        \r\n                        <div className=\"row\">                       \r\n                            <div className=\"col-lg-12 col-md-12\">\r\n                                    \r\n                                    <Card>\r\n                                        <Card.Title style={{fontSize:16,padding:10,color:'white',backgroundColor:'gray'}}>Profile</Card.Title>\r\n                                        <Card.Body>\r\n                                            <div style={{color:'red'}}>{this.state.error}</div>\r\n                                            <div className=\"col-12\" style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gridGap: 10 }}>\r\n                                                \r\n                                                <div>\r\n                                                    <Form.Group controlId=\"formBasicEmail\" >\r\n                                                        <Form.Label>First Name</Form.Label>\r\n                                                        <Form.Control type=\"text\" disabled={true} placeholder=\"First Name\" value={this.state.firstName} />                                                                                                        \r\n                                                    </Form.Group>\r\n                                                </div>\r\n                                                <div >\r\n                                                    <Form.Group controlId=\"formBasicEmail\">\r\n                                                        <Form.Label>Last Name</Form.Label>\r\n                                                        <Form.Control type=\"text\" disabled={true} placeholder=\"Last Name\" value={this.state.lastName} />                                                                                                        \r\n                                                    </Form.Group>\r\n                                                </div>\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"col-12\" style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gridGap: 10 }}>\r\n                                                    <div>\r\n                                                    <Form.Group controlId=\"formBasicEmail\" >\r\n                                                        <Form.Label>Mobile No.</Form.Label>\r\n                                                        <Form.Control type=\"text\" disabled={true} placeholder=\"Mobile No\" value={this.state.mobileNo} />                                                                                                        \r\n                                                    </Form.Group>\r\n                                                </div>\r\n                                                <div >\r\n                                                    <Form.Group controlId=\"formBasicEmail\" >\r\n                                                        <Form.Label>Email</Form.Label>\r\n                                                        <Form.Control type=\"email\" disabled={true} placeholder=\"Mobile No\" value={this.state.email} />                                                                                                        \r\n                                                    </Form.Group>\r\n                                                </div>\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"col-12\" style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gridGap: 10 }}>\r\n                                                <div>\r\n                                                    <Form.Group controlId=\"formBasicEmail\" >\r\n                                                        <Form.Label>Diver License</Form.Label>\r\n                                                        <Form.Control type=\"text\" disabled={true} placeholder=\"License No\" value={this.state.idNumber} />                                                                                                        \r\n                                                    </Form.Group>\r\n                                                </div>\r\n                                                <div >\r\n                                                <Form.Group controlId=\"formBasicEmail\" >\r\n                                                        <img src={this.state.licenseLink} width={100} />\r\n                                                    </Form.Group>\r\n                                                    \r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"col-12\" style={{ display: \"grid\", gridTemplateColumns: \"repeat(2, 1fr)\", gridGap: 10 }}>\r\n                                            <Form.Group controlId=\"formBasicEmail\" >\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control name=\"userPassword\" value={this.state.userPassword} type=\"text\" placeholder=\"Password\" onChange={this.setUserPassword} />\r\n                                </Form.Group>\r\n                                            </div>\r\n                                            <div className=\"col-12\">        \r\n                                                \r\n                                                <Form.Group controlId=\"formBasicEmail\" style={{float:'right'}}>\r\n                                                    <Button variant=\"primary\" type=\"button\" onClick={this.updateProfile.bind(this)}>\r\n                                                        Update password\r\n                                                    </Button>                                                                                                       \r\n                                                </Form.Group>\r\n                                            </div>\r\n                                            \r\n                                        </Card.Body>\r\n                                    </Card>                                   \r\n                            </div>             \r\n                            \r\n                        </div>\r\n\r\n                    </div>\r\n                    \r\n                </section>\r\n                 \r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withRouter(Profile);"],"sourceRoot":""}