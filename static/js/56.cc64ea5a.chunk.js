(this["webpackJsonpVishwa Car Rental"]=this["webpackJsonpVishwa Car Rental"]||[]).push([[56],{119:function(e,t,r){"use strict";var a=r(4),i=r(8),s=r(64),c=r.n(s),n=r(1),o=r.n(n),d=r(66),l=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],h=o.a.forwardRef((function(e,t){var r=e.bsPrefix,s=e.className,n=e.striped,h=e.bordered,j=e.borderless,b=e.hover,g=e.size,x=e.variant,u=e.responsive,O=Object(i.a)(e,l),p=Object(d.a)(r,"table"),m=c()(s,p,x&&p+"-"+x,g&&p+"-"+g,n&&p+"-striped",h&&p+"-bordered",j&&p+"-borderless",b&&p+"-hover"),v=o.a.createElement("table",Object(a.a)({},O,{className:m,ref:t}));if(u){var f=p+"-responsive";return"string"===typeof u&&(f=f+"-"+u),o.a.createElement("div",{className:f},v)}return v}));t.a=h},426:function(e,t,r){"use strict";r.r(t);var a=r(53),i=r(54),s=r(42),c=r(41),n=r(44),o=r(45),d=r(1),l=r(50),h=r(119),j=r(389),b=r(55),g=r(49),x=(r(57),r(9)),u=(r(77),r(2)),O=r.n(u),p=r(58),m=r.n(p),v=r(3),f=r(63),y=r(0),N=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var c;return Object(s.a)(this,r),(c=t.call(this,e)).state={userId:"",item:[],carData:[],driverData:[],error:"",isLoading:!1,loadingColor:"#ffffff",pageNo:0,bookingId:"",showCarDialog:!1,showDriverDialog:!1,carNo:"",driverMobile:""},c.setShowCarDialog=function(e){c.setState({bookingId:e.orderId});var t=c.state.showCarDialog;c.setState({showCarDialog:!t})},c.setHideCarDialog=function(){var e=c.state.showCarDialog;c.setState({showCarDialog:!e})},c.setShowDriverDialog=function(e){c.setState({error:""}),c.setState({bookingId:e.orderId});var t=c.state.showDriverDialog;c.setState({showDriverDialog:!t})},c.setHideDriverDialog=function(){c.setState({error:""});var e=c.state.showDriverDialog;c.setState({showDriverDialog:!e})},c.setCarNo=function(e){c.setState({carNo:e.target.value})},c.setDriverMobile=function(e){c.setState({driverMobile:e.target.value})},c.searchDriver=Object(i.a)(Object(a.a)().mark((function e(){var t,r,i,s,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({error:""}),t=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(t)},i="&mobileNo="+c.state.driverMobile,e.next=6,fetch("https://vishwacarrental.com:8080/agent/get_driver_bymobile?"+i,{headers:r});case 6:return s=e.sent,e.next=9,s.json();case 9:200==(n=e.sent).code?(console.log("Here dataRes"+JSON.stringify(n)),c.setState({driverData:n.data})):c.setState({error:"Driver not found"}),c.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e)}))),c.searchCar=Object(i.a)(Object(a.a)().mark((function e(){var t,r,i,s,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({error:""}),t=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(t)},i="&carNo="+c.state.carNo,e.next=6,fetch("https://vishwacarrental.com:8080/agent/get_carByNo?"+i,{headers:r});case 6:return s=e.sent,e.next=9,s.json();case 9:200==(n=e.sent).code?c.setState({carData:n.data}):c.setState({error:"Car not found"}),c.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e)}))),c.selectDriver=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,i,s,n,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({error:""}),c.setState({isLoading:!0}),r=localStorage.getItem("token"),i={Authorization:"Bearer ".concat(r)},s=t.firstName+" "+t.lastName,n={agentId:c.state.userId,driverId:t._id,driverName:s,mobileNo:t.mobileNo,bookingId:c.state.bookingId,contactNo:c.state.email},e.next=8,m.a.post("https://vishwacarrental.com:8080/agent/assign_booking_driver",n,{headers:i});case 8:200==(o=e.sent).data.code?(c.setState({error:o.data.message}),c.setHideDriverDialog(),c.getBooking(c.state.userId)):(console.log("errorr:"+o.data.message),c.setState({error:o.data.message})),c.setState({isLoading:!1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.selectCar=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,i,s,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({error:""}),c.setState({isLoading:!0}),r=localStorage.getItem("token"),i={Authorization:"Bearer ".concat(r)},s={agentId:c.state.userId,carId:t._id,modelName:t.carModelName,carNo:t.carNo,carType:t.carType,bookingId:c.state.bookingId},e.next=7,m.a.post("https://vishwacarrental.com:8080/agent/assign_booking_car",s,{headers:i});case 7:200==(n=e.sent).data.code?(c.setState({error:n.data.message}),c.setHideCarDialog(),c.getBooking(c.state.userId)):c.setState({error:n.data.message}),c.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.setState({isLoading:!0});var e=localStorage.getItem("userId");this.setState({userId:e}),this.getBooking(e)}},{key:"getBooking",value:function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){var r,i,s,c,n,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),i=this.state.pageNo+1,s={Authorization:"Bearer ".concat(r)},c="&agentId="+t+"&pageId="+i,e.next=6,fetch("https://vishwacarrental.com:8080/agent/get_my_bookings?"+c,{headers:s});case 6:return n=e.sent,e.next=9,n.json();case 9:200==(o=e.sent).code?this.setState({item:o.data}):this.setState({error:"some internal error please try later"}),this.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)(g.default,{}),Object(y.jsx)("div",{children:Object(y.jsx)(O.a,{css:"\n        display: block;\n        margin: 0 auto;\n        border-color: red;\n        position: absolute;\n        z-index: 9;\n        margin: 0px auto;\n        left: 40%;\n        ",style:{borderColor:"red"},color:this.state.loadingColor,loading:this.state.isLoading,size:150,children:"  "})}),Object(y.jsx)("div",{children:Object(y.jsx)("section",{id:"pricing",className:"pricing",children:Object(y.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(l.a.Title,{className:"bgColor",style:{fontSize:16,fontWeight:"bold",borderRadius:"5px 5px 0px 0px",padding:10,color:"white"},children:"My Pending Bookings "}),Object(y.jsx)(l.a.Body,{children:Object(y.jsx)("div",{style:{color:"red"},children:Object(y.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"BookingId"}),Object(y.jsx)("th",{children:"Name "}),Object(y.jsx)("th",{children:"Pickup"}),Object(y.jsx)("th",{children:"Destination"}),Object(y.jsx)("th",{children:"PickupDate"}),Object(y.jsx)("th",{children:"ReturnDate"}),Object(y.jsx)("th",{children:"Amount"}),Object(y.jsx)("th",{children:"Booking Amount"}),Object(y.jsx)("th",{children:"Driver"}),Object(y.jsx)("th",{children:"Car"})]})}),Object(y.jsx)("tbody",{children:this.state.item.map((function(t,r){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)(x.b,{variant:"success",style:{padding:"4px",fontSize:12,textAlign:"center"},to:{pathname:"/BookingDetails/".concat(t.orderId)},children:t.orderId})}),Object(y.jsxs)("td",{children:[t.userName,"(",t.mobileNo,")"]}),Object(y.jsx)("td",{children:t.pickup}),Object(y.jsx)("td",{children:t.destination}),Object(y.jsx)("td",{children:void 0!=t.pickupDate?t.pickupDate:null}),Object(y.jsx)("td",{children:void 0!=t.returnDate?t.returnDate:null}),Object(y.jsx)("td",{children:t.agentPrice}),Object(y.jsx)("td",{children:t.agentPaid}),Object(y.jsx)("td",{children:""!=t.driverId?Object(y.jsxs)("div",{children:[t.driverName," ",t.driverContact]}):Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",style:{float:"right"},children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:e.setShowDriverDialog.bind(e,t),children:"Driver"})})}),Object(y.jsx)("td",{children:""!=t.carId?Object(y.jsxs)("div",{children:[t.gadiModel," ",t.gadiNo]}):Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",style:{float:"right"},children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:e.setShowCarDialog.bind(e,t),children:"Car"})})})]})}))})]})})})]})})})})})}),Object(y.jsxs)(f.a,{show:this.state.showCarDialog,onHide:this.setHideCarDialog.bind(this.state.showCarDialog),dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",children:[Object(y.jsx)(f.a.Header,{closeButton:!0,children:Object(y.jsx)(f.a.Title,{id:"example-custom-modal-styling-title",children:"Select Car"})}),Object(y.jsxs)(f.a.Body,{children:[Object(y.jsxs)("section",{id:"pricing",className:"pricing",children:[Object(y.jsx)("div",{children:this.state.error}),Object(y.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)("div",{className:"col-12",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:5},children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",children:Object(y.jsx)(b.a.Control,{type:"text",placeholder:"Search by Number",value:this.state.carNo,onChange:this.setCarNo})})}),Object(y.jsx)("div",{children:Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",style:{float:"right"},children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:this.searchCar.bind(this),children:"Search"})})})]})})})]}),Object(y.jsx)("section",{id:"pricing",className:"pricing",children:Object(y.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Model Name"}),Object(y.jsx)("th",{children:"Type "}),Object(y.jsx)("th",{children:"carNo"}),Object(y.jsx)("th",{children:"#"})]})}),Object(y.jsxs)("tbody",{children:[this.state.carData.map((function(t,r){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t.carModelName}),Object(y.jsx)("td",{children:t.carType}),Object(y.jsx)("td",{children:t.carNo}),Object(y.jsx)("td",{children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:e.selectCar.bind(e,t),children:"Select"})})]},r+1)})),"  "]})]})})})})]})]}),Object(y.jsxs)(f.a,{show:this.state.showDriverDialog,onHide:this.setHideDriverDialog.bind(this.state.showDriverDialog),dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",children:[Object(y.jsx)(f.a.Header,{closeButton:!0,children:Object(y.jsx)(f.a.Title,{id:"example-custom-modal-styling-title",children:"Select Driver"})}),Object(y.jsxs)(f.a.Body,{children:[Object(y.jsxs)("section",{id:"pricing",className:"pricing",children:[Object(y.jsx)("div",{children:this.state.error}),Object(y.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)("div",{className:"col-12",style:{display:"grid",gridTemplateColumns:"repeat(2)",gridGap:5},children:[Object(y.jsx)("div",{children:Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",children:Object(y.jsx)(b.a.Control,{type:"text",placeholder:"Search by mobile no.",value:this.state.driverMobile,onChange:this.setDriverMobile})})}),Object(y.jsx)("div",{children:Object(y.jsx)(b.a.Group,{controlId:"formBasicEmail",style:{float:"right"},children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:this.searchDriver.bind(this),children:"Search"})})})]})})})]}),Object(y.jsx)("section",{id:"pricing",className:"pricing",children:Object(y.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Name"}),Object(y.jsx)("th",{children:"Mobile "}),Object(y.jsx)("th",{children:"Lincese No"}),Object(y.jsx)("th",{children:"#"})]})}),Object(y.jsxs)("tbody",{children:[this.state.driverData.map((function(t,r){return Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[t.firstName," ",t.lastName]}),Object(y.jsx)("td",{children:t.mobileNo}),Object(y.jsx)("td",{children:t.idNumber}),Object(y.jsx)("td",{children:Object(y.jsx)(j.a,{variant:"primary",type:"button",onClick:e.selectDriver.bind(e,t),children:"Select"})})]})})),"  "]})]})})})})]})]})]})}}]),r}(d.Component);t.default=Object(v.f)(N)}}]);
//# sourceMappingURL=56.cc64ea5a.chunk.js.map