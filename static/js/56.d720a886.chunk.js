(this["webpackJsonpVishwa Car Rental"]=this["webpackJsonpVishwa Car Rental"]||[]).push([[56],{122:function(e,t,r){"use strict";var a=r(4),n=r(8),i=r(64),s=r.n(i),c=r(1),o=r.n(c),d=r(72),l=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=o.a.forwardRef((function(e,t){var r=e.bsPrefix,i=e.className,c=e.striped,u=e.bordered,p=e.borderless,h=e.hover,j=e.size,b=e.variant,m=e.responsive,f=Object(n.a)(e,l),x=Object(d.a)(r,"table"),O=s()(i,x,b&&x+"-"+b,j&&x+"-"+j,c&&x+"-striped",u&&x+"-bordered",p&&x+"-borderless",h&&x+"-hover"),g=o.a.createElement("table",Object(a.a)({},f,{className:O,ref:t}));if(m){var y=x+"-responsive";return"string"===typeof m&&(y=y+"-"+m),o.a.createElement("div",{className:y},g)}return g}));t.a=u},428:function(e,t,r){"use strict";r.r(t);var a=r(55),n=r(56),i=r(43),s=r(42),c=r(44),o=r(45),d=r(1),l=r(51),u=r(122),p=r(49),h=(r(57),r(9)),j=(r(77),r(2)),b=r.n(j),m=r(58),f=r.n(m),x=r(3),O=r(0),g=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var s;return Object(i.a)(this,r),(s=t.call(this,e)).state={userId:"",item:[],error:"",isLoading:!1,loadingColor:"#ffffff",pageNo:0,payment_orderId:""},s.loadScript=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.onload=function(){t(!0)},r.onerror=function(){t(!1)},document.body.appendChild(r)}))},s.prePayment=function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){var r,n,i,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.loadScript("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:return{"Content-Type":"application/json"},"amount=",r=20*t.agentPrice/100,n=t.finalAmount-t.paid,i={amount:100*r,bookingId:t.orderId,agentId:s.state.userId,bookingAmount:t.agentPrice,tripAmount:t.finalAmount,userPaid:t.paid,userAmount:n},e.next=13,f.a.post("https://vishwacarrental.com:8080/agent/payment",i);case 13:if(c=e.sent){e.next=17;break}return alert("Server error. Are you online?"),e.abrupt("return");case 17:return console.log("result==pay=="+c),s.setState({payment_orderId:c.data.data._id,currency:c.data.data.currency,receipt:c.data.data.receipt}),o=c.data.data,o.amount,o.id,o.currency,s.payNow(r,c.data.data._id,c.data.data.currency),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.setState({isLoading:!0});var e=localStorage.getItem("userId");this.setState({userId:e}),this.getBooking(e)}},{key:"showPopup",value:function(e){this.prePayment(e)}},{key:"getBooking",value:function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){var r,n,i,s,c,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),n=this.state.pageNo+1,i={Authorization:"Bearer ".concat(r)},s="&userId="+t+"&pageId="+n,e.next=6,fetch("https://vishwacarrental.com:8080/agent/get_my_completed_bookings?"+s,{headers:i});case 6:return c=e.sent,e.next=9,c.json();case 9:200==(o=e.sent).code?this.setState({item:o.data}):(console.log("errorr"),this.setState({error:"some internal error please try later"})),this.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"payNow",value:function(){var e=Object(n.a)(Object(a.a)().mark((function e(t,r,i){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={key:"rzp_live_P6qbTUQVqidRo6",amount:t,currency:i,description:"Booking ID: "+r,image:"",order_id:r,handler:function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){var r,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={razorpayPaymentId:t.razorpay_payment_id,razorpayOrderId:t.razorpay_order_id,razorpaySignature:t.razorpay_signature,rawResponce:t},e.next=3,f.a.post("https://vishwacarrental.com:8080/agent/success",r);case 3:n=e.sent,window.location.href="/ThankYou/"+this.state.item.bookingId,alert(n.data.message);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),prefill:{name:this.state.firstName+" "+this.state.lastName,email:this.state.email,contact:this.state.item.mobileNo},notes:{address:this.state.item.pickupCity},theme:{color:"#61dafb"}},new window.Razorpay(s).open();case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(p.default,{}),Object(O.jsx)("div",{children:Object(O.jsx)(b.a,{css:"\n        display: block;\n        margin: 0 auto;\n        border-color: red;\n        position: absolute;\n        z-index: 9;\n        margin: 0px auto;\n        left: 40%;\n        ",style:{borderColor:"red"},color:this.state.loadingColor,loading:this.state.isLoading,size:150,children:"  "})}),Object(O.jsx)("div",{children:Object(O.jsx)("section",{id:"pricing",className:"pricing",children:Object(O.jsx)("div",{className:"container","data-aos":"fade-up",style:{width:"95%!important"},children:Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-lg-12 col-md-12",children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(l.a.Title,{className:"bgColor",style:{fontSize:16,fontWeight:"bold",borderRadius:"5px 5px 0px 0px",padding:10,color:"white"},children:"My Completed Booking "}),Object(O.jsx)(l.a.Body,{children:Object(O.jsx)("div",{style:{color:"red"},children:Object(O.jsxs)(u.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"BookingId"}),Object(O.jsx)("th",{children:"Name "}),Object(O.jsx)("th",{children:"Pickup"}),Object(O.jsx)("th",{children:"Destination"}),Object(O.jsx)("th",{children:"PickupDate"}),Object(O.jsx)("th",{children:"ReturnDate"}),Object(O.jsx)("th",{children:"Amount"}),Object(O.jsx)("th",{children:"Booking Amount"}),Object(O.jsx)("th",{children:"Payment From Passneger"}),Object(O.jsx)("th",{children:"Status"}),Object(O.jsx)("th",{children:"Journy"})]})}),Object(O.jsx)("tbody",{children:this.state.item.map((function(e,t){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(h.b,{variant:"success",style:{padding:"4px",fontSize:12,textAlign:"center"},to:{pathname:"/BookingDetails/".concat(e.orderId)},children:e.orderId})}),Object(O.jsxs)("td",{children:[e.userName,"(",e.mobileNo,")"]}),Object(O.jsx)("td",{children:e.pickup}),Object(O.jsx)("td",{children:e.destination}),Object(O.jsx)("td",{children:void 0!=e.pickupDate?e.pickupDate:null}),Object(O.jsx)("td",{children:void 0!=e.returnDate?e.returnDate:null}),Object(O.jsx)("td",{children:e.agentPrice}),Object(O.jsx)("td",{children:e.agentPaid}),Object(O.jsx)("td",{children:e.cashAmount}),Object(O.jsx)("td",{children:e.status}),Object(O.jsx)("td",{children:e.journyStatus})]},t+1)}))})]})})})]})})})})})})]})}}]),r}(d.Component);t.default=Object(x.f)(g)}}]);
//# sourceMappingURL=56.d720a886.chunk.js.map